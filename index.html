<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="shortcut icon" href="computer.gif">
  <title>Derek Williams</title>
  <link rel="Stylesheet" href="css-reset.css">
  <link rel="Stylesheet" href="MTG-Life.css">
</head>
<body>
<ul class="desktop-icons">
  <li id="resume">
    <a target="resume">
      <div class="link-icon"><img src="Images/shell32_35.ico"/></div>
        <div class="link-text">
      Resume
        </div>
    </a>
  </li>
  <li id="about">
    <a target="about">
      <div class="link-icon"><img src="Images/shell32_24.ico"/></div>
        <div class="link-text">
      About Me
        </div>
    </a>
  </li>
  <li id="github">
    <a href="https://github.com/DerekWilliamsFL"  target="_blank">
      <div class="link-icon"><img src="Images/shell32_32.ico"/></div>
        <div class="link-text">
      GitHub
        </div>
    </a>
  </li>
  <li id="journey">
    <a  href="http://derekwilliamsfl.github.io/Canvas/" target="journey">
      <div class="link-icon"><img src="Images/character.png"/></div>
        <div class="link-text">
      Journey
        </div>
    </a>
  </li>
  <li id="imdb">
    <a href="http://derekwilliamsfl.github.io/imdb-api/" target="imdb">
      <div class="link-icon"><img src="Images/imdb.png"/></div>
        <div class="link-text">
      iMDB Search
        </div>
    </a>
  </li>
  <li id="sttropez">
    <a href="http://derekwilliamsfl.github.io/St.Tropez/" target="sttropez">
      <div class="link-icon"><img src="Images/purse.png"/></div>
        <div class="link-text">
      St.Tropez
        </div>
    </a>
  </li>
  <li id="drivein">
    <a href="http://derekwilliamsfl.github.io/Drive-In-Theater/"  target="drivein">
      <div class="link-icon"><img src="Images/dit.png" width="32" height="32"/></div>
        <div class="link-text">
      Drive In
        </div>
    </a>
  </li>
   <li id="email">
    <a>
      <div class="link-icon"><img src="Images/email.png" width="32" height="32"/></div>
        <div class="link-text">
      E-Mail
        </div>
    </a>
  </li>
</ul>
<div id="email-window" class="application-frame">
  <header class="application-controlbar">
    <div class="application-title">
      <img src="Images/email.png" width="16" height="16" />
      <span>Email</span>
    </div>
    <div class="application-button-group">
      <button class="minimize"></button>
      <button class="maximize"></button>
      <button class="close"></button>
    </div>
  </header>
  <form id="contactform">
    <div class="emailform"> <span>Name: </span><input type="text" name="name"></div>
    <div style="clear: both;"></div>
    <div class="emailform"><span>Email:</span> <input type="email" name="_replyto"></div>
    <div style="clear: both;"></div>
    <textarea name="message" data-role="none"></textarea>
    <div class="emailform"><input type="submit" id="sendMessage"></div>
</form>
</div>
<div id="resume-window" class="application-frame">
  <header class="application-controlbar">
    <div class="application-title">
      <img src="Images/shell32_35.ico" width="16" height="16" />
      <span>Resume</span>
    </div>
    <div class="application-button-group">
      <button class="minimize"></button>
      <button class="maximize"></button>
      <button class="close"></button>
    </div>
  </header>
  <div class="iframe">
  <img src="Images/DWilliams-Resume.pdf" />
</div>
</div>
<div id="about-window" class="application-frame">
  <header class="application-controlbar">
    <div class="application-title">
      <img src="Images/shell32_24.ico" width="16" height="16" />
      <span>About Me</span>
    </div>
    <div class="application-button-group">
      <button class="minimize"></button>
      <button class="maximize"></button>
      <button class="close"></button>
    </div>
  </header>
  <div class="iframe">
  <iframe name="about" ></iframe>
</div>
</div>
<div id="sttropez-window" class="application-frame">
  <header class="application-controlbar">
    <div class="application-title">
      <img src="Images/purse.png" width="16" height="16" />
      <span>St. Tropez</span>
    </div>
    <div class="application-button-group">
      <button class="minimize"></button>
      <button class="maximize"></button>
      <button class="close"></button>
    </div>
  </header>
  <div class="iframe">
  <iframe src="http://derekwilliamsfl.github.io/St.Tropez/" name="sttropez"></iframe>
</div>
</div>
<div id="drivein-window" class="application-frame">
  <header class="application-controlbar">
    <div class="application-title">
      <img src="Images/dit.png" width="16" height="16" />
      <span>Drive In Theater</span>
    </div>
    <div class="application-button-group">
      <button class="minimize"></button>
      <button class="maximize"></button>
      <button class="close"></button>
    </div>
  </header>
  <div class="iframe">
  <iframe src="http://derekwilliamsfl.github.io/Drive-In-Theater/" name="drivein"></iframe>
</div>
</div>
<div id="imdb-window" class="application-frame">
  <header class="application-controlbar">
    <div class="application-title">
      <img src="Images/imdb.png" width="16" height="16" />
      <span>iMDB Search</span>
    </div>
    <div class="application-button-group">
      <button class="minimize"></button>
      <button class="maximize"></button>
      <button class="close"></button>
    </div>
  </header>
  <div class="iframe">
  <iframe  src="http://derekwilliamsfl.github.io/imdb-api/" name="imdb" ></iframe>
</div>
</div>
<div id="journey-window" class="application-frame">
  <header class="application-controlbar">
    <div class="application-title">
      <img src="Images/character.png" width="16" height="16" />
      <span>Journey in Canvas</span>
    </div>
    <div class="application-button-group">
      <button class="minimize"></button>
      <button class="maximize"></button>
      <button class="close"></button>
    </div>
  </header>
  <div class="iframe">
  <iframe src="http://derekwilliamsfl.github.io/Canvas/" name="journey" ></iframe>
</div>
</div>
<div class="start-menu"></div>
<div class="bottom-dock">
  <button class="start-button">
    <img class="win95start" src="Images/win95start.gif">
    <span>Start</span>
  </button>
  <div id="inset-notif" class="notif"><img src="Images/sound.gif"></img><span id="time">12:34</span></div>
</div>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.2/jquery.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.11.4/jquery-ui.min.js"></script>
<script src="http://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.js"></script>
<script>

function touchHandler(event) {
    var self = this;
    var touches = event.changedTouches,
        first = touches[0],
        type = "";
    switch (event.type) {
    case "touchstart":
        type = "mousedown";
        window.startY = event.pageY;
        break;
    case "touchmove":
        type = "mousemove";
        break;
    case "touchend":
        type = "mouseup";
        break;
    default:
        return;
    }
    var simulatedEvent = document.createEvent("MouseEvent");
    simulatedEvent.initMouseEvent(type, true, true, window, 1, first.screenX, first.screenY, first.clientX, first.clientY, false, false, false, false, 0 /*left*/ , null);
    first.target.dispatchEvent(simulatedEvent);
    var scrollables = [];
    var clickedInScrollArea = false;
    var parentEls = jQuery(event.target).parents().map(function() {
        try {
            if (jQuery(this).hasClass('is-scrollable')) {
                clickedInScrollArea = true;
                var direction = (window.startY < first.clientY) ? 'down' : 'up';
                if (((jQuery(this).scrollTop() <= 0) && (direction === 'down')) || ((jQuery(this).height() <= jQuery(this).scrollTop()) && (direction === 'up')) ){
                } else {
                    scrollables.push(this);
                }
            }
        } catch (e) {}
    });
    if ((scrollables.length === 0) && (type === 'mousemove')) {
        event.preventDefault();
    }
}



$("#sendMessage").on("click", function() {
    $.ajax({
        url: "https://formspree.io/derekwilliamsfl@gmail.com", 
        method: "POST",
        data: $("#contactform").serialize(),
        dataType: "json",
        beforeSend: function() { 
          $('#contactform').html("<p>Sending..</p>");
          $('#contactform').append("<img src='Images/email.gif'/>");
          $('#contactform img').css('display','block');
          $('#contactform form').css('border','none'); },
        success: function(data) {
        $('#contactform').html("<p>Sent!</p> ");
          $('#contactform').append("<img src='Images/sent.gif'/>");
          $('#contactform img').css('display','block');
          $('#contactform form').css('border','none'); },
        error: function(err) {
        $('#contactform').html("<p>Not Sent. Please try again.</p>");
          $('#contactform').append("<img src='Images/missed.gif'/>");
          $('#contactform img').css('display','block');
          $('#contactform form').css('border',''); }
    });
});

function initTouchHandler() {
    document.addEventListener("touchstart", touchHandler, true);
    document.addEventListener("touchmove", touchHandler, true);
    document.addEventListener("touchend", touchHandler, true);
    document.addEventListener("touchcancel", touchHandler, true);
}
  $(document).ready(function() {
    var originalState = $("#contactform").clone();
    $.mobile.loading().hide();
    function updateTime() {
      var dNow = new Date();
      var localdate =  dNow.getHours() + ':' + dNow.getMinutes();
      $('#time').text(localdate);
    }
    function doit(selector) {
      $(selector).animate({
        'marginTop' : "+=1000px",
      }, 200, function(){
        $(selector).css('display', 'none');
        //$(selector).css('visibility', 'hidden');
      });
    }
    updateTime();
    setInterval(updateTime, 5000);
    function appendToDock(selector) {
      var imgsrc = $(selector).find('img').attr('src');
      var images = $('.docked').children('img').map(function(){
          return $(this).attr('src')
      }).get();
      if (images.indexOf(imgsrc) === -1) {
        $('.bottom-dock').append('<button class="docked"><img src=' + imgsrc + '></button>' );
      }
    };
    initTouchHandler();
    $(".application-frame").draggable({
      iframeFix: true,
      cursor: "pointer",
    });
   /* $("div .application-frame").bind('vclick', function (e){
       console.log(this.id);
       var red = $(this).find('iframe').contents();
       red.bind('vclick', function (e){})
    });*/
    $(".bottom-dock").on('vclick', '.docked', function (e){
        var imgsrc = $(this).find('img').attr('src');
        var blue = $(".application-frame").find("img[src=" + "'" + imgsrc + "'" +"]").parent().parent().parent();
        var selector = "#" + blue.attr('id');
        $(selector).css('display', 'block');
        //$(selector).css('visibility', 'visible');
        $(selector).animate({
        'marginTop' : "-=1000px",
      }, 200, function(){  
      });
    });
    $("#resume").bind('vclick', function (e){
      $("#resume-window").css('visibility', 'visible');
      $("#resume-window").css('display', 'block');
      appendToDock(this);
    });
    $("#email").bind('vclick', function (e){
      $("#email-window").css('visibility', 'visible');
      //$("#email-window").css('visibility', 'visible');
      appendToDock(this);
    });

    $("#drivein").bind('vclick', function (e){
      $("#drivein-window").css('visibility', 'visible');
      $("#drivein-window iframe").css('display', 'block');
      appendToDock(this);
    });
    $("#journey").bind('vclick', function (e){
      $("#journey-window").css('visibility', 'visible');
      $("#journey-window iframe").css('display', 'block');
      appendToDock(this);
    });
    $("#sttropez").bind('vclick', function (e){
      $("#sttropez-window").css('visibility', 'visible');
      $("#sttropez-window iframe").css('display', 'block');
      appendToDock(this);
    });
    $("#imdb").bind('vclick', function (e){
      $("#imdb-window").css('visibility', 'visible');
      $("#imdb-window iframe").css('display', 'block');
      appendToDock(this);
    });
    $(".maximize").bind('vclick', function (e){
      $(this).parent().parent().parent().css('height', '100%');
    });
    $(".minimize").bind('vclick', function (e){
      doit($(this).parent().parent().parent());
    });
    $(".close").bind('vclick', function (e){
      $(this).parent().parent().parent().find('.iframe').find('iframe').css('display', 'none');
      $(this).parent().parent().parent().css('visibility', 'hidden');
      var imgsrc = $(this).parent().parent().find('img').attr('src');
      var red = $(".bottom-dock").find("img[src=" + "'" + imgsrc + "'" +"]").parent();
      red.remove();
    });
    $("#email-window .close").bind('vclick', function (e){
      $('contactform').replaceWith(originalState.clone());
      $('contactform').replaceWith(originalState);
    });
    $("#drivein-window .close").bind('vclick', function (e){
      $("#drivein-window iframe").contents().find('#canvas').click();
      $("#drivein-window iframe").contents().find('#fillwidth').get(0).pause();
      $(this).parent().parent().parent().find('.iframe').find('iframe').css('display', 'none');
      $(this).parent().parent().parent().css('visibility', 'hidden');
    });
    $("#about").bind('vclick', function (e){
      $("#about-window").css('visibility', 'visible');
      $("#about-window iframe").css('display', 'block');
      appendToDock(this);
    });
    var menuShown = false;
    var maximized = false;
    $(".start-button").bind('vclick', function (e){
      if (menuShown === false) {
        menuShown = true;
        $(".start-menu").stop().animate({height: "+=273px"}, 200);
        
      }
      else if (menuShown === true && $(".start-button").data('clicked')){
        menuShown = false;
        $(".start-menu").stop().animate({height: "-=273px"}, 200);
      }
      else if (menuShown === true && $(".start-button").blur()){
        menuShown = false;
        $(".start-menu").stop().animate({height: "-=273px"}, 200);
      }
    });
    $(".maximize").bind('vclick', function (e){
      if (maximized === false) {
        maximized = true;
        $(this).parent().parent().parent().addClass('maximized');
      }
      else {
        maximized = false;
        $(this).parent().parent().parent().removeClass('maximized');
      }
    })
});
</script>
</body>
</html>